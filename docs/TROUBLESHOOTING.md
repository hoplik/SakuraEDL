# 常见问题与故障排除

> 本文档汇总 SakuraEDL 使用过程中的常见问题和解决方案

## 目录

- [通用问题](#通用问题)
- [驱动问题](#驱动问题)
- [高通 EDL 问题](#高通-edl-问题)
- [联发科 MTK 问题](#联发科-mtk-问题)
- [展讯 SPD 问题](#展讯-spd-问题)
- [Fastboot 问题](#fastboot-问题)
- [错误代码](#错误代码)

---

## 通用问题

### 程序无法启动

**症状:** 双击程序无反应或闪退

**解决方案:**
1. 确认已安装 .NET Framework 4.8
   ```
   下载: https://dotnet.microsoft.com/download/dotnet-framework/net48
   ```
2. 以管理员身份运行
3. 检查杀毒软件是否拦截
4. 查看 Windows 事件日志

### 设备未识别

**症状:** 程序显示"未检测到设备"

**解决方案:**
1. 检查 USB 连接
2. 尝试不同 USB 端口 (建议 USB 2.0)
3. 更换 USB 数据线
4. 检查设备管理器中的设备状态
5. 重新安装驱动

### USB 连接不稳定

**症状:** 设备频繁断开连接

**解决方案:**
1. 避免使用 USB Hub
2. 使用主板后置 USB 端口
3. 更换高质量数据线
4. 检查 USB 端口供电
5. 关闭 USB 节能选项:
   ```
   设备管理器 → USB 控制器 → 属性 → 电源管理
   取消勾选 "允许计算机关闭此设备以节约电源"
   ```

### 操作超时

**症状:** 刷写或读取操作超时

**解决方案:**
1. 检查 USB 连接稳定性
2. 尝试降低传输速度
3. 分批操作大文件
4. 检查设备存储健康状态

---

## 驱动问题

### 如何检查驱动状态

1. 打开设备管理器 (`devmgmt.msc`)
2. 查找对应设备类别:
   - 高通: 端口 → Qualcomm HS-USB QDLoader 9008
   - MTK: 端口 → MediaTek PreLoader USB VCOM
   - SPD: 端口 → SPRD USB Serial
   - Fastboot: Android Device → Android Bootloader Interface

### 驱动安装失败

**症状:** 设备显示黄色感叹号

**解决方案:**
1. 禁用驱动签名强制:
   ```
   设置 → 更新和安全 → 恢复 → 高级启动 → 重启
   疑难解答 → 高级选项 → 启动设置 → 重启
   选择 "禁用驱动程序强制签名"
   ```
2. 手动安装驱动:
   ```
   设备管理器 → 右键设备 → 更新驱动 → 浏览计算机
   ```
3. 使用驱动安装工具

### 多个设备冲突

**症状:** 连接多个设备时识别混乱

**解决方案:**
1. 一次只连接一个设备
2. 在程序中选择正确的 COM 端口
3. 检查设备管理器确认端口号

---

## 高通 EDL 问题

### 无法进入 9008 模式

**解决方案:**
1. 完全关机后尝试按键组合
2. 尝试 ADB 命令: `adb reboot edl`
3. 尝试 Fastboot 命令: `fastboot oem edl`
4. 查找设备 EDL 测试点并短接
5. 检查是否有硬件保护

### Sahara 握手失败

**错误信息:** `Sahara handshake failed`

**解决方案:**
1. 重新安装高通驱动
2. 尝试不同 USB 端口
3. 检查设备是否正确进入 9008
4. 等待几秒后重试

### Loader 加载失败

**错误信息:** `Failed to load programmer`

**解决方案:**
1. 使用云端自动匹配
2. 确认 Loader 与芯片匹配
3. 尝试不同版本 Loader
4. 检查 Loader 文件完整性

### Firehose 命令失败

**错误信息:** `Firehose command failed: NAK`

**解决方案:**
1. 检查分区名称是否正确
2. 确认镜像文件格式
3. 检查存储空间
4. 查看详细错误日志

---

## 联发科 MTK 问题

### 无法进入 BROM 模式

**解决方案:**
1. 确保设备完全关机
2. 按住音量-后再连接 USB
3. 尝试取出电池后操作
4. 检查是否有 BROM 测试点

### DA 加载失败

**错误信息:** `Failed to load DA`

**解决方案:**
1. 使用内置 DA 文件
2. 尝试不同 DA 版本
3. 检查芯片是否支持
4. 启用漏洞利用

### XFlash 协议失败

**错误信息:** `XFlash command failed`

**解决方案:**
1. 程序会自动回退到 XML 协议
2. 手动选择 XML 协议重试
3. 检查 CRC 校验是否通过
4. 查看详细错误信息

### 漏洞利用失败

**错误信息:** `Exploit failed`

**解决方案:**
1. 确认芯片支持对应漏洞
2. 检查设备安全级别
3. 尝试不同 DA 文件
4. 更新程序版本

---

## 展讯 SPD 问题

### 无法进入下载模式

**解决方案:**
1. 完全关机后按住音量-连接
2. 检查驱动安装
3. 尝试不同 USB 端口

### FDL 下载失败

**错误信息:** `FDL download failed`

**解决方案:**
1. 确认选择正确的芯片型号
2. 检查 FDL 地址配置
3. 确保 FDL 文件完整
4. 检查签名绕过是否成功

### 波特率切换失败

**错误信息:** `Baud rate switch failed`

**解决方案:**
1. 等待几秒后重试
2. 重新连接设备
3. 检查 USB 稳定性

### T760/T770 签名绕过失败

**解决方案:**
1. 确保 Payload 文件存在:
   ```
   custom_exec_no_verify_65012f48.bin
   ```
2. 检查文件完整性
3. 确认 exec_addr 配置正确
4. 更新 Payload 文件

---

## Fastboot 问题

### 设备未检测到

**解决方案:**
1. 安装 Google USB Driver
2. 确认设备在 Fastboot 模式
3. 检查设备管理器
4. 尝试命令行: `fastboot devices`

### 命令执行失败

**常见错误:**

| 错误 | 原因 | 解决方案 |
|------|------|----------|
| `FAILED (remote: Device is locked)` | Bootloader 锁定 | 解锁 Bootloader |
| `FAILED (remote: Verify failed)` | 验证失败 | 禁用 vbmeta 验证 |
| `FAILED (remote: Not enough space)` | 空间不足 | 检查分区大小 |
| `FAILED (remote: Command not allowed)` | 命令禁止 | 检查设备限制 |

### 解锁失败

**解决方案:**
1. 确认已开启 OEM 解锁选项
2. 检查账号绑定限制
3. 部分品牌需要官方申请
4. 等待解锁等待期

### 刷写后无法开机

**解决方案:**
1. 检查刷写的镜像是否正确
2. 确保所有必要分区都已刷写
3. 检查 A/B 槽位状态
4. 尝试恢复出厂设置
5. 刷写完整固件包

---

## 错误代码

### 通用错误代码

| 代码 | 说明 | 解决方案 |
|------|------|----------|
| `E001` | USB 连接失败 | 检查 USB 连接和驱动 |
| `E002` | 设备响应超时 | 检查设备状态 |
| `E003` | 文件读取失败 | 检查文件路径和权限 |
| `E004` | 文件写入失败 | 检查磁盘空间和权限 |
| `E005` | 协议错误 | 重新连接设备 |

### 高通错误代码

| 代码 | 说明 | 解决方案 |
|------|------|----------|
| `SAHARA_NAK` | Sahara 协议错误 | 重新连接 |
| `FIREHOSE_NAK` | Firehose 命令被拒绝 | 检查命令参数 |
| `SECURE_BOOT` | 安全启动限制 | 需要签名 Loader |

### MTK 错误代码

| 代码 | 说明 | 解决方案 |
|------|------|----------|
| `BROM_ERROR` | BROM 通信错误 | 重新进入 BROM |
| `DA_LOAD_FAIL` | DA 加载失败 | 更换 DA 文件 |
| `AUTH_FAIL` | 认证失败 | 启用漏洞利用 |

### SPD 错误代码

| 代码 | 说明 | 解决方案 |
|------|------|----------|
| `FDL_CHECKSUM` | FDL 校验失败 | 重新下载 FDL |
| `BSL_ERROR` | BSL 命令错误 | 检查命令参数 |
| `SIGNATURE_FAIL` | 签名验证失败 | 启用签名绕过 |

---

## 日志收集

### 如何收集日志

1. 在程序中开启详细日志模式
2. 复现问题
3. 点击 **"保存日志"**
4. 将日志文件发送给开发者

### 日志级别说明

| 级别 | 说明 |
|------|------|
| `INFO` | 一般信息 |
| `SUCCESS` | 操作成功 |
| `WARNING` | 警告信息 |
| `ERROR` | 错误信息 |
| `DEBUG` | 调试信息 |
| `HEX` | 十六进制数据 |

---

## 获取帮助

### 社区支持

- **QQ 群**: [SakuraEDL](https://qm.qq.com/q/z3iVnkm22c)
- **Telegram**: [OPFlashTool](https://t.me/OPFlashTool)

### 报告问题

1. 收集详细日志
2. 描述问题复现步骤
3. 提供设备信息
4. 在 GitHub 提交 Issue

### 开发者联系

- **GitHub**: [@xiriovo](https://github.com/xiriovo)
- **邮箱**: 1708298587@qq.com

---

<p align="center">
  <a href="QUICK_REFERENCE.md">快速参考</a> |
  <a href="../README.md">返回主页</a>
</p>
