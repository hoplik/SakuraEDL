# 自动认证

## 概述

部分设备在 EDL 模式下需要特殊认证才能加载 Loader，SakuraEDL 支持自动处理这些认证。

## 支持的认证方式

### 小米认证 (miauth)

小米/红米设备需要 Mi Auth 认证：

1. 程序自动检测小米设备
2. 发送认证请求
3. 认证成功后加载 Loader

**支持的设备：**
- 红米 Note 系列
- 小米数字系列
- Redmi K 系列
- POCO 系列

### 一加认证 (demacia)

一加/OPPO 设备需要 Demacia 认证：

1. 勾选 **"oplus 认证"** 选项
2. 程序自动处理认证流程
3. 认证成功后继续操作

**支持的设备：**
- 一加全系列
- OPPO 部分机型
- Realme 部分机型

### VIP 认证

部分设备需要额外的 Digest 和 Sign 文件：

```
Loader 文件: prog_firehose.elf
Digest 文件: loader.digest
Sign 文件: loader.sign
```

云端 Loader 已包含所需认证文件，自动下载使用。

## 使用方法

### 自动认证

大多数情况下，认证过程是自动的：

1. 连接设备
2. 选择或匹配 Loader
3. 程序自动检测并执行认证
4. 认证成功后继续操作

### 手动配置

如果自动认证失败：

1. 在设置中勾选对应认证选项
2. 小米设备：选择 "小米认证"
3. 一加设备：勾选 "oplus 认证"

## 认证流程

```
┌─────────────┐
│  连接设备   │
└──────┬──────┘
       ▼
┌─────────────┐
│ 检测设备类型 │
└──────┬──────┘
       ▼
┌─────────────┐    是    ┌─────────────┐
│ 需要认证？  │─────────►│  执行认证   │
└──────┬──────┘          └──────┬──────┘
       │否                      │
       ▼                        ▼
┌─────────────┐          ┌─────────────┐
│ 加载 Loader │◄─────────│ 认证成功？  │
└─────────────┘          └─────────────┘
```

## 常见问题

### Q: 认证失败怎么办？

1. 确认设备已正确进入 9008 模式
2. 尝试重新连接设备
3. 检查 Loader 是否与设备匹配
4. 尝试其他 Loader 文件

### Q: 小米设备需要解锁吗？

EDL 模式刷机不需要解锁 Bootloader，但需要正确的认证 Loader。

### Q: 一加设备提示认证失败？

1. 确保勾选了 "oplus 认证" 选项
2. 使用云端匹配的 Loader
3. 检查设备是否支持 EDL 模式
